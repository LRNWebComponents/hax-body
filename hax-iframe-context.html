<link rel="import" href="../app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="hax-context-item.html">
<link rel="import" href="hax-toolbar.html">

<!--
`hax-iframe-context`
A context menu that provides common iframe based authoring options.

@demo demo/index.html

@microcopy - the mental model for this element
 - context menu - this is a menu of iframe based buttons and events for use in a larger solution.
-->

<dom-module id="hax-iframe-context">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <hax-toolbar hax-properties="[[haxProperties]]" size="{{iframeSize}}">
      <slot></slot>
      <hax-context-item
        slot="primary"
        icon="editor:insert-link"
        label="Link"
        event-name="iframe-link"></hax-context-item>
      <hax-context-item
        slot="primary"
        icon="settings"
        label="Settings"
        event-name="hax-manager-configure"></hax-context-item>
    </hax-toolbar>
  </template>

  <script>
    Polymer({

      is: 'hax-iframe-context',
      properties: {
        /**
         * iframe size.
         */
        iframeSize: {
          type: Number,
          value: 100,
          observer: '_iframeSizeChanged',
        },
        /**
         * So we can get it to add our bars we need
         */
        haxProperties: {
          type: Object,
          value: {
            'canScale': true,
            'canPosition': true,
            'canEditSource': true,
            'settings': {
              'quick': [
                {
                  'attribute': 'src',
                  'title': 'Source',
                  'description': 'The URL for this video.',
                  'inputMethod': 'textfield',
                  'icon': 'link',
                  'required': true,
                  'validationType': 'url',
                },
              ],
              'configure': [
                {
                  'attribute': 'src',
                  'title': 'Source',
                  'description': 'The URL for this video.',
                  'inputMethod': 'textfield',
                  'icon': 'link',
                  'required': true,
                  'validationType': 'url',
                },
                {
                  'property': 'responsive',
                  'title': 'Responsive',
                  'description': 'The video automatically fills the available area.',
                  'inputMethod': 'boolean',
                  'icon': 'image:photo-size-select-small',
                },
              ],
              'advanced': []
            }
          },
        },
      },
      /**
       * Iframe size changed.
       */
      _iframeSizeChanged: function(newValue, oldValue) {
        if (typeof newValue !== typeof undefined) {
          this.fire('hax-context-item-selected', {eventName: 'hax-size-change', value: newValue});
        }
      },
    });
  </script>
</dom-module>
